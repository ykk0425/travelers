<div>
  <p><i class="fa-regular fa-comment fa-flip-horizontal"></i> コメント件数：<%= @plan.comments.count %></p>

  <% @plan.comments.each do |comment| %> 
    <div class="mb-4 p-3 border rounded">
      <div class="d-flex align-items-start">
        <div class="me-3">
          <%= image_tag comment.user.get_profile_image(50, 50), class: "rounded-circle" %>
        </div>

        <div>
          <div class="fw-bold"><%= comment.user.name %></div>
          <div class="text-muted small"><%= comment.created_at.strftime('%Y/%m/%d') %></div>
        </div>
      </div>

      <div class="mt-2 d-flex justify-content-between align-items-start">
        <p class="mb-1"><%= comment.text %></p>

        <% if comment.user == current_user %>
          <%= link_to "削除", plan_comment_path(comment.plan, comment), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "btn btn-sm btn-outline-danger ms-3 " %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
